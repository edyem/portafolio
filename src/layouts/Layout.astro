---
import "../styles/theme.css";
import "../styles/toggler.css";
import "../styles/aurora.css";
import "../styles/luxe.css";
---

<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content={Astro.generator} />
    <title>EMD | Erazo Muñoz Diseño</title>

    <!-- Open Graph -->
    <meta property="og:title" content="EMD | Erazo Muñoz Diseño" />
    <meta
      property="og:description"
      content="Portafolio de diseño gráfico y dirección de arte."
    />
    <meta property="og:image" content="https://emd.pages.dev/thumbnail.png" />
    <meta property="og:url" content="https://emd.pages.dev" />
    <meta property="og:type" content="website" />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="EMD | Erazo Muñoz Diseño" />
    <meta
      name="twitter:description"
      content="Portafolio de diseño gráfico y dirección de arte."
    />
    <meta name="twitter:image" content="https://emd.pages.dev/thumbnail.png" />

    <script is:inline>
      (() => {
        const DEFAULT_MODE = "dark";
        const DEFAULT_SKIN = "aurora";
        const mode = localStorage.getItem("mode") || DEFAULT_MODE;
        const skin = localStorage.getItem("skin") || DEFAULT_SKIN;
        const root = document.documentElement;
        root.dataset.mode = mode;
        root.dataset.skin = skin;
        root.style.colorScheme = mode;
      })();
    </script>
  </head>
  <body>
    <slot />
  </body>
</html>

<style>
  html,
  body {
    margin: 0;
    width: 100%;
    height: 100%;
  }
</style>

<script>
  if (typeof window !== "undefined") {
    // Bloquear menú contextual en imágenes
    window.addEventListener("contextmenu", (event) => {
      const target = event.target;
      if (target instanceof HTMLImageElement) {
        event.preventDefault();
      }
    });

    // Transición de vista entre páginas internas
    window.addEventListener("click", (event) => {
      const anchor = event.target.closest?.("a");
      if (!anchor) return;

      const href = anchor.getAttribute("href");
      if (
        !href ||
        href.startsWith("http") ||
        href.startsWith("mailto:") ||
        href.startsWith("#")
      ) {
        return;
      }

      // Solo aplicamos a enlaces de proyectos y botón de back
      if (
        !anchor.classList.contains("project-card") &&
        !anchor.classList.contains("backbutton")
      ) {
        return;
      }

      if (!("startViewTransition" in document)) {
        return;
      }

      event.preventDefault();
      const url = anchor.href;

      document.startViewTransition(() => {
        window.location.href = url;
      });
    });
  }
</script>
